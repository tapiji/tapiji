<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<fragment>
   <extension
         point="org.eclipse.rap.ui.entrypoint">
      <entrypoint
            class="org.eclipselabs.tapiji.translator.rap.TranslatorEntryPoint"
            id="org.eclipselabs.tapiji.translator.rap.entrypoint"
            path="/translator">
      </entrypoint>
   </extension>
   <extension
         point="org.eclipse.rap.ui.themes">
      <themeContribution
            file="themes/tapiji.css"
            themeId="org.eclipse.rap.rwt.theme.Default">
      </themeContribution>
   </extension>
   <extension
         point="org.eclipse.rap.ui.branding">
      <branding
            defaultEntrypointId="org.eclipselabs.tapiji.translator.rap.entrypoint"
            favicon="icons/tapiji_favicon.ico"
            id="org.eclipselabs.tapiji.translator.branding"
            servletName="translator"
            themeId="org.eclipse.rap.rwt.theme.Default"
            title="TapiJI Translator">
      </branding>
   </extension>
  <extension
	         point="org.eclipse.ui.actionSets">
	      <actionSet
	            label="File Action Set"
	            visible="true"
	            id="org.eclipselabs.tapiji.translator.fileActionSet2">
	       <action
                 class="org.eclipselabs.tapiji.translator.actions.FileOpenAction"
                 definitionId="org.eclipselabs.tapiji.translator.fileOpen"
                 icon="icons/uploadRB.gif"
                 id="FileOpenAction"
                 label="Upload Resource-Bundle ..."
                 menubarPath="file_mnu/fileStart"
                 state="false"
                 style="push"
                 toolbarPath="org.eclipse.ui.workbench.file/open.ext"
                 tooltip="Uploads a Resource-Bundle">
           </action>
           <action
                 class="org.eclipselabs.tapiji.translator.actions.DownloadPropertiesFileAction"
                 definitionId="org.eclipselabs.tapiji.translator.downloadPropertiesFile"
                 id="DownloadPropertiesFileAction"
                 label="Download Resource-Bundle ..."
                 style="push">
           </action>
	      </actionSet>
       <actionSet
             id="org.eclipselabs.tapiji.translator.rap.UserActionSet"
             label="User Action Set"
             visible="true">
          <action
                allowLabelUpdate="true"
                class="org.eclipselabs.tapiji.translator.actions.LoginAction"
                definitionId="org.eclipselabs.tapiji.translator.login"
                icon="icons/login.png"
                id="LoginAction"
                label="Login"
                style="push">
          </action>
          <action
                class="org.eclipselabs.tapiji.translator.actions.LogoutAction"
                definitionId="org.eclipselabs.tapiji.translator.logout"
                id="LogoutAction"
                label="Logout ..."
                style="push">
          </action>
    <action
                class="org.eclipselabs.tapiji.translator.actions.RegisterAction"
                definitionId="org.eclipselabs.tapiji.translator.register"
                id="RegisterAction"
                label="Register ..."
                style="push">
          </action>
       </actionSet>
	   </extension>

  <extension
        point="org.eclipse.ui.menus">
     <menuContribution
           allPopups="false"
           locationURI="menu:file_mnu?after=fileStart">
        <command
              commandId="org.eclipselabs.tapiji.translator.downloadPropertiesFile"
              icon="icons/downloadRB.gif"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <with
                    variable="activeEditorId">
                 <equals
                       value="com.essiembre.rbe.eclipse.editor.ResourceBundleEditor">
                 </equals>
              </with>
           </visibleWhen>
        </command>
     </menuContribution>
     <menuContribution
           allPopups="false"
           locationURI="menu:org.eclipse.ui.main.menu">
        <menu
              id="user"
              label="User">
        </menu>
        <menu
              id="window"
              label="Window">
        </menu>
     </menuContribution>
     <menuContribution
           allPopups="false"
           locationURI="menu:user">
        <command
              commandId="org.eclipselabs.tapiji.translator.register"
              style="push">
              <visibleWhen
                 checkEnabled="false">
              <with
                    variable="activeContexts">
                 <iterate
                       operator="and">
                    <not>
                       <equals
                             value="org.eclipselabs.tapiji.translator.userLoggedIn">
                       </equals>
                    </not>
                 </iterate>
              </with>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipselabs.tapiji.translator.login"
              icon="icons/login.png"
              style="push">
        	<visibleWhen
                 checkEnabled="false">
              <with
                    variable="activeContexts">
                 <iterate
                       operator="and">
                    <not>
                       <equals
                             value="org.eclipselabs.tapiji.translator.userLoggedIn">
                       </equals>
                    </not>
                 </iterate>
              </with>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipselabs.tapiji.translator.logout"
              icon="icons/logout.png"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <with
                    variable="activeContexts">
                 <iterate
                       operator="or">
                    <equals
                          value="org.eclipselabs.tapiji.translator.userLoggedIn">
                    </equals>
                 </iterate>
              </with>
           </visibleWhen>
        </command>
     </menuContribution>
     <menuContribution
           allPopups="false"
           locationURI="toolbar:org.eclipse.ui.trim.command2">
        <toolbar
              id="user">
        </toolbar>
     </menuContribution>
     <menuContribution
           allPopups="false"
           locationURI="toolbar:user">
       <command
             commandId="org.eclipselabs.tapiji.translator.login"
             icon="icons/login.png"
             label="Login"
             mode="FORCE_TEXT"
             style="push">
           <visibleWhen
                 checkEnabled="false">
             <with
                    variable="activeContexts">
                <iterate
                       operator="and">
                   	<not>
                       	<equals
                          	   value="org.eclipselabs.tapiji.translator.userLoggedIn">
                       	</equals>
                    </not>
                 </iterate>
              </with>
           </visibleWhen>
        </command>
       <command
             commandId="org.eclipselabs.tapiji.translator.register"
             label="Register"
             mode="FORCE_TEXT"
             style="push">
             <visibleWhen
                 checkEnabled="false">
             <with
                    variable="activeContexts">
                <iterate
                       operator="and">
                   	<not>
                       	<equals
                          	   value="org.eclipselabs.tapiji.translator.userLoggedIn">
                       	</equals>
                    </not>
                 </iterate>
              </with>
           </visibleWhen>
       </command>
        <dynamic
              class="org.eclipselabs.tapiji.translator.rap.widgets.UserInfoContributionItem"
              id="org.eclipselabs.tapiji.translator.rap.userItem">
              <visibleWhen
                 checkEnabled="false">
              <with
                    variable="activeContexts">
                 <iterate
                       operator="or">
                    <equals
                          value="org.eclipselabs.tapiji.translator.userLoggedIn">
                    </equals>
                 </iterate>
              </with>
           </visibleWhen>
        </dynamic>
     </menuContribution>
  </extension>
  <extension
        point="org.eclipse.ui.startup">
     <startup
           class="org.eclipselabs.tapiji.translator.rap.TranslatorRAPStartup">
     </startup>
  </extension>
  <extension
        point="org.eclipse.ui.views">
     <category
           id="org.eclipselabs.tapiji"
           name="Internationalization">
     </category>
     <view
           category="org.eclipselabs.tapiji"
           class="org.eclipselabs.tapiji.translator.views.StorageView"
           icon="icons/database.png"
           id="org.eclipselabs.tapiji.translator.views.StorageView"
           name="Storage"
           restorable="true">
     </view>
  </extension>
  <extension
        point="org.eclipse.ui.contexts">
     <context
           id="org.eclipselabs.tapiji.translator.userLoggedIn"
           name="user logged in">
     </context>
  </extension>
  <extension
        point="org.eclipse.ui.commands">
        <command
            id="org.eclipselabs.tapiji.translator.downloadPropertiesFile"
  			name="Download Resource-Bundle ...">
      </command>
      <command
            id="org.eclipselabs.tapiji.translator.login"
            name="Login ...">
      </command>
      <command
            id="org.eclipselabs.tapiji.translator.logout"
            name="Logout ...">
      </command>
      <command
            id="org.eclipselabs.tapiji.translator.register"
            name="Register ...">
      </command>
  </extension>
  <extension
        point="org.eclipse.ui.activities">
     <activity
           id="org.eclipselabs.tapiji.translator.hiddenView"
           name="Hidden View Activity">
     </activity>
     <activityPatternBinding
           activityId="org.eclipselabs.tapiji.translator.hiddenView"
           isEqualityPattern="true"
           pattern="org.eclipse.rap.ui.views/org.eclipse.ui.views.PropertySheet">
     </activityPatternBinding>
  </extension>
</fragment>
